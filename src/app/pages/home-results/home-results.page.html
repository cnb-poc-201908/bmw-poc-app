<ion-header>
  <ion-toolbar color="primary">
      <ion-buttons slot="start">
          <ion-back-button text="返回"></ion-back-button>
        </ion-buttons>
    <ion-title text-center>
      <ion-text color="light" class="regno-info">
        <ion-text color="light" class="fw700">{{store.customer?.regno}}</ion-text>
        <!-- <ion-icon name="information-circle-outline" appShadowCss shadowCustomCss='.icon-inner{padding-top: 2px;}'></ion-icon> -->
      </ion-text>
    </ion-title>
    <ion-buttons slot="end" *ngIf="camCount>0">
        <ion-button size="small" shape="round" color="medium" (click)="goNotification()">
          <ion-icon name="notifications"></ion-icon>
          <ion-badge color="danger" slot="end">{{camCount}}</ion-badge>
        </ion-button>
      </ion-buttons>
  </ion-toolbar>
  <ion-toolbar color="primary">
      <!-- <ion-icon name="arrow-back" (click)="back()" style="font-size: 1.4rem;"></ion-icon> -->
      <ion-slides pager="true">
          <ion-slide>
            <section class="customer-header">
              <ion-grid style="width: 50%;
              padding-top: 0;
              padding-bottom: 0;">
                <!-- <ion-row>
                  <ion-col text-left style="font-size: 1.5rem;" class="padding-top-bottom-1">{{objectReceive?.regno}}<ion-icon name="information-circle-outline"></ion-icon></ion-col>
                </ion-row> -->
                <ion-row>
                  <ion-col text-left class="customer-text padding-top-bottom-1">{{store.customer.customer_info?.SALUTE}}</ion-col>
                </ion-row>
                <ion-row>
                  <ion-col text-left class="customer-text padding-top-bottom-1">{{store.customer.customer_info?.PHONE | maskPhone}}</ion-col>
                </ion-row>
                <ion-row>
                  <ion-col text-left class="customer-text padding-top-bottom-1">保修日期: 2019-09-09</ion-col>
                </ion-row>
                <ion-row>
                  <ion-col text-left><span class="incompleted-info padding-top-bottom-1">完善客户信息</span></ion-col>
                </ion-row>
              </ion-grid>
              <ion-grid style="width: 50%;
              padding-top: 0;
              padding-bottom: 0;">
              <!-- <span class="bubble">88</span> -->
                  <!-- <ion-row>
                    <ion-col text-right class="padding-top-bottom-1">
                     <span class="aftersales-info" (click)="notifications($event)">售后提醒</span>
                      <ion-badge color="danger" (click)="notifications($event)">3</ion-badge>
                    </ion-col>
                  </ion-row> -->
                  <ion-row>
                    <ion-col text-right class="padding-top-bottom-1">
                        <ion-input inputmode="text" placeholder="请输入/KM" value=""></ion-input>
                        <div class="customer-text">当前里程</div>
                    </ion-col>
                  </ion-row>
                  <ion-row>
                    <ion-col text-right class="padding-top-bottom-1">
                        <div style="display: flex;align-items: center;justify-content: flex-end;">
                            <ion-datetime #datePicker pickerFormat="HH:mm" hidden="true"></ion-datetime>
                          <ion-input inputmode="text" placeholder="请输入" value="{{datePicker.value}}" (ionFocus)="showPicker()"></ion-input>
                          
                          <!-- <div>
                            <img src="../../../assets/icon/packages/etc.png">
                          </div> -->
                          <ion-icon name="calendar"></ion-icon>
                        </div>
                        <div class="customer-text">交车时间</div>
                    </ion-col>
                  </ion-row>
                </ion-grid>
            </section>
          </ion-slide>
          <ion-slide>
            <section>
                <ion-text color="light">这里是很多描述信息。。。</ion-text>
            </section>
          </ion-slide>
        </ion-slides>
  </ion-toolbar>
  <ion-toolbar class="tab-warp" color="primary" style="padding: 5px 14px;">
    <ion-segment scrollable (ionChange)="changeTab($event)">
      <ion-segment-button checked value="maintenance" (click)="forward('/pack-maintenance')">
        <ion-label>
          <div class="btn-label">
            <!-- <img src="../../../assets/icon/packages/etc.png"> -->
            <ion-icon name="clipboard" style="font-size: 1.6rem;margin: auto 0;"></ion-icon>
            <span>保养</span>
          </div>
        </ion-label>
      </ion-segment-button>
      <ion-segment-button value="check" (click)="forward('/pack-check')">
        <ion-label>
          <div class="btn-label">
            <!-- <img src="../../../assets/icon/packages/etc.png"> -->
            <ion-icon name="construct" style="font-size: 1.6rem;margin: auto 0;"></ion-icon>
            <span>查修</span>
          </div>
        </ion-label>
      </ion-segment-button>
      <ion-segment-button value="accident" (click)="forward('/pack-accident')">
        <ion-label>
          <div class="btn-label">
            <!-- <img src="../../../assets/icon/packages/etc.png"> -->
            <ion-icon name="warning" style="font-size: 1.6rem;margin: auto 0;"></ion-icon>
            <span>事故车</span>
          </div>
        </ion-label>
      </ion-segment-button>
      <ion-segment-button value="first" (click)="forward('/pack-etc')">
          <ion-label>
            <div class="btn-label">
              <!-- <img src="../../../assets/icon/packages/etc.png"> -->
              <ion-icon name="paper" style="font-size: 1.6rem;margin: auto 0;"></ion-icon>
              <span>加装</span>
            </div>
          </ion-label>
        </ion-segment-button>
      <ion-segment-button value="etc">
        <ion-label>
          <div class="btn-label">
            <!-- <img src="../../../assets/icon/packages/etc.png"> -->
            <ion-icon name="calculator" style="font-size: 1.6rem;margin: auto 0;"></ion-icon>
            <span>备注</span>
          </div>
        </ion-label>
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>


<ion-content>

    <ion-list-header color="light">
      <ion-label class="fw700">Package</ion-label>
    </ion-list-header>
  <ion-list #slidingList>
  <ion-card color="light" class="no-radius" *ngFor="let pack of packages; index as i" >
      <ion-card-content no-padding>
          <ion-item-sliding>
            <ion-item no-padding style="z-index: 0;" (click)="doClick(pack)" [ngStyle]="{'border-bottom':pack.expand && pack.expand ==true ? '1px solid '+setColorByType(pack.RepairTypeCode) :''}">
              <div class="package-type-color" [ngStyle]="{'border-top-color':setColorByType(pack.RepairTypeCode)}"></div>
              <div class="package-type">{{pack.RepairType}}</div>
              <ion-label>{{pack.PackageName}}</ion-label>
              <ion-note slot="end">{{getPackagePrice(pack) | currency:'￥':true:'1.2-2'}}</ion-note>
            </ion-item>
            <ion-item-options side="end">
                <ion-item-option color="danger" (click)="remove(i)">
                  <ion-icon name="trash"></ion-icon>
                  Delete
                </ion-item-option>
              </ion-item-options>
          </ion-item-sliding>
          <ng-container *ngIf="pack.expand && pack.expand ==true">
              <ion-item *ngFor="let item of pack.PartInfo; index as j" class="sub-item">
                  <ion-label class="details">P {{item.PartsName}}</ion-label>
                  <ion-note slot="end">{{!item.PartPrice ? '0' : item.PartPrice | currency:'￥':true:'1.2-2'}}</ion-note>
                  <ion-icon name="remove-circle-outline" slot="end" color="danger" (click)="removePartItem(i,j)"></ion-icon>
              </ion-item>
              <ion-item *ngFor="let item of pack.Laborinfo; index as j" class="sub-item">
                <ion-label class="details">L {{item.LaborDescription}}</ion-label>
                <ion-note slot="end">{{item.LaborPrice | currency:'￥':true:'1.2-2'}}</ion-note>
                <ion-icon name="remove-circle-outline" slot="end" color="danger" (click)="removeLaborItem(i,j)"></ion-icon>
              </ion-item>
            </ng-container>
      </ion-card-content>
    </ion-card>
  </ion-list>
</ion-content>

<ion-footer class="main-footer">
    <ion-grid class="footer-grid" style="padding-top: 0;padding-bottom: 0;font-size: .8rem;">
      <ion-row class="footer-grid-row">
        <ion-col size="5" no-padding>
          <ion-grid style="height: 100%;padding-top: 0;padding-bottom: 0">
            <ion-row style="padding:3px;">
              维修套餐组个数: {{packageAmount}}/个
            </ion-row>
            <ion-row style="padding:3px;">
              标准维修时长: {{getAllLaborAmount() | number : '1.0-0'}}小时
            </ion-row>
          </ion-grid>
        </ion-col>
        <ion-col size="7" style="padding-top: 0;padding-bottom: 0">
            <!-- <ion-buttons> -->
              <ion-button expand="round" size="medium" float-right (click)="comingsoon">结算</ion-button>
              <ion-button expand="round" size="medium" color="success" float-right (click)="save()">保存</ion-button>
            <!-- </ion-buttons> -->
        </ion-col>
      </ion-row>

    </ion-grid>
</ion-footer>